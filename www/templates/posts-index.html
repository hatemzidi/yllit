<ion-view title="Posts" hide-back-button="true" ng-cloak>

    <ion-nav-buttons side="right">
        <button ng-click="switch('thumbs')" class="button button-icon icon ion-grid"></button>
    </ion-nav-buttons>

    <ion-content has-header="true" has-tabs="true" start-y="46">

        <ion-refresher on-refresh="doRefresh()" refreshing-icon="ion-looping">
        </ion-refresher>


        <div class="bar bar-header item-input-inset search-bar">
            <label class="item-input-wrapper">
                <i class="icon ion-ios7-search placeholder-icon"></i>
                <input type="search" ng-model="cr.searchString" placeholder="search">
            </label>
            <button class="button button-clear" ng-if="cr.searchString" ng-click="clearFilter()">
                <i class="icon ion-ios7-close"></i>
            </button>
        </div>

        <ion-list>

            <ion-item ng-repeat="post in posts track by post.id" type="item-complex" class="item-complex posts">

                <div class="list card post">

                    <div class="item item-avatar">
                        <img src="{{post.grumpy.avatar}}"/>

                        <div class="info">
                            <p>{{post.grumpy.nickname}}</p>

                            <p class="location" ng-show="post.location.name"><i class="fa fa-map-marker"></i>&nbsp;<a
                                    href="#/tab/map/{{post.id}}">{{post.location.name}}</a></p>
                        </div>
                        <div class="time">
                            <p><i class="fa fa-clock-o"></i>&nbsp;{{post.timestamp | timeAgo}}</p>
                        </div>
                    </div>

                    <div class="item item-body">
                        <a href="#/tab/post/{{post.id}}">
                            <img class="full-image" src="{{post.image}}">
                        </a>

                        <div class="post-bottom">
                            <div class="row no-padding post-buttons">

                                <div class="col">
                                    &nbsp;
                                </div>
                                <div class="col col-15">
                                    <a class="tab-item" ng-click="share()">
                                        <i class="ion-more"></i>
                                    </a>
                                </div>
                                <div class="col col-20">
                                    <a class="tab-item" href="#">
                                        <i class="ion-speakerphone"></i> {{post.counter | kilo:0}}
                                    </a>
                                </div>
                                <div class="col col-20">
                                    <a class="tab-item" href="#">
                                        <i class="ion-chatboxes"></i> {{post.counter | kilo:0}}
                                    </a>
                                </div>

                            </div>
                        </div>

                    </div>


                </div>

            </ion-item>

        </ion-list>

    </ion-content>
</ion-view>